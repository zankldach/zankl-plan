<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Zankl Plan{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Styles -->
  <link rel="stylesheet" href="/static/style.v2.css">

  <!-- KEIN globales app.js laden (bewusst) -->
  <!-- <script src="/static/app.js"></script> -->

  <style>
    :root { --blue:#003a8f; --bg:#f4f6f8; }
    html, body { height:100%; }
    body {
      margin:0;
      font-family: Arial, sans-serif;
      background: var(--bg);
      color:#0f172a;
    }

    header.site {
      background: var(--blue);
      color:#fff;
      padding:10px 20px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    nav.site {
      background: var(--blue);
      padding:6px 20px;
      display:flex;
      gap:16px;
      align-items:center;
      position:sticky;
      top:0;
      z-index:1000;
    }

    nav.site a {
      color:#fff;
      text-decoration:none;
      font-weight:600;
      padding:6px 10px;
      border-radius:6px;
    }
    nav.site a:hover { background: rgba(255,255,255,0.14); }
    nav.site a.is-active { background: rgba(255,255,255,0.22); }

    #settingsGear { cursor:pointer; font-size:20px; }
    main { padding:20px; }
  </style>

  {% block head %}{% endblock %}
</head>
<body>

<script>
  try {
    window.__fourDay = {{ 'true' if (four_day_week | default(false)) else 'false' }};
  } catch(e) {
    window.__fourDay = false;
  }
</script>

<header class="site">
  <strong>Zankl Plan</strong>
  <div id="settingsGear" title="Einstellungen">⚙️</div>
</header>

<nav class="site" role="navigation" aria-label="Hauptnavigation">
  <a href="/week?standort=engelbrechts">Engelbrechts</a>
  <a href="/week?standort=gross-gerungs">Groß Gerungs</a>
  <a href="/settings/employees">Einstellungen</a>
  <a href="/year">Jahr</a>
  <a href="/health">Health</a>
</nav>

<main>
  {% block content %}{% endblock %}
</main>

<script>
  const gear = document.getElementById('settingsGear');
  if (gear) {
    gear.addEventListener('click', () => {
      window.location.href = '/settings/employees';
    });
  }

  const currentPath = window.location.pathname;
  document.querySelectorAll('nav.site a').forEach(a => {
    const aPath = new URL(a.href, window.location.origin).pathname;
    if (currentPath === aPath || currentPath.startsWith(aPath)) {
      a.classList.add('is-active');
    }
  });
</script>

{% block scripts %}{% endblock %}
</body>
</html>
