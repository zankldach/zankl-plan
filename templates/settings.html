
{% extends "base.html" %}
{% block title %}Einstellungen{% endblock %}
{% block content %}

<h1>Einstellungen</h1>

<table class="table" border="1" cellspacing="0" cellpadding="4">
  <thead>
    <tr>
      <th>Standort</th>
      <th>Arbeitstage</th>
      <th>Mitarbeiter-Zeilen</th>
      <th>Aktion</th>
    </tr>
  </thead>
  <tbody>
    {% for s in settings %}
      {% set st = (standorte | selectattr('id', 'equalto', s.standort_id) | list)[0] if standorte else None %}
      <tr>
        <td>{{ st.name if st else s.standort_id }}</td>
        <td>{{ s.workdays }}</td>
        <td>{{ s.employee_lines }}</td>
        <td>
          /settings/update
            <input type="hidden" name="standort_id" value="{{ s.standort_id }}" />
            <label>Tage:</label>
            <select name="workdays">
              <option value="4" {% if s.workdays == 4 %}selected{% endif %}>4</option>
              <option value="5" {% if s.workdays == 5 %}selected{% endif %}>5</option>
            </select>
            <label>Zeilen:</label>
            <input type="number" name="employee_lines" value="{{ s.employee_lines }}" min="4" max="40" />
            <button type="submit">Speichern</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<p style="margin-top:16px;">
  /settings/usersBenutzer-Zuordnung (Viewer → Standort) öffnen</a>
</p>

{% endblock %}
