{% extends "base.html" %}
{% block content %}
<h1>Einstellungen</h1>

<table class="table">
  <thead><tr><th>Standort</th><th>Arbeitstage</th><th>Mitarbeiter-Zeilen</th><th>Aktion</th></tr></thead>
  <tbody>
    {% for s in standorte %}
      {% set st = None %}
      {% for set in settings %}
        {% if set.standort_id == s.id %}{% set st = set %}{% endif %}
      {% endfor %}
      <tr>
        <td>{{ s.name }}</td>
        <td>{{ st.workdays if st else 5 }}</td>
        <td>{{ st.employee_lines if st else 10 }}</td>
        <td>
          <form method="post" action="/settings/update" class="form-inline">
            <input type="hidden" name="standort_id" value="{{ s.id }}">
            <label>Arbeitstage
              <select name="workdays">
                <option value="5" {% if st and st.workdays==5 %}selected{% endif %}>Mo–Fr</option>
                <option value="4" {% if st and st.workdays==4 %}selected{% endif %}>Mo–Do</option>
              </select>
            </label>
            <label>Mitarbeiter-Zeilen
              <input type="number" name="employee_lines" value="{{ st.employee_lines if st else 10 }}" min="1" max="40">
            </label>
            <button type="submit">Speichern</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<p><a href="/settings/users">Benutzer-Zuordnung (Viewer → Standort) öffnen</a></p>
{% endblock %}
