{% extends "base.html" %}
{% block title %}Mitarbeiterverwaltung{% endblock %}
{% block content %}

<h1>Mitarbeiterverwaltung</h1>

<div id="settings" style="margin-top:20px;">
    <h3>Mitarbeiterliste</h3>
    <div id="employeeList" style="margin-bottom:10px;"></div>
    <button id="addEmployee">+ Mitarbeiter</button>
</div>

<script>
const MAX_EMPLOYEES = 15;
let employeeNames = JSON.parse(localStorage.getItem('employeeNames')) || [
    "Mitarbeiter 1","Mitarbeiter 2","Mitarbeiter 3","Mitarbeiter 4","Mitarbeiter 5"
];

const employeeListDiv = document.getElementById('employeeList');

function renderEmployeeList() {
    employeeListDiv.innerHTML = '';
    employeeNames.forEach((name, index) => {
        const div = document.createElement('div');
        div.style.display = 'flex';
        div.style.alignItems = 'center';
        div.style.marginBottom = '5px';

        const input = document.createElement('input');
        input.value = name;
        input.style.flex = '1';
        input.style.padding = '4px';
        input.style.marginRight = '5px';
        input.oninput = () => {
            employeeNames[index] = input.value;
            localStorage.setItem('employeeNames', JSON.stringify(employeeNames));
        };

        const delBtn = document.createElement('button');
        delBtn.innerText = 'â€“';
        delBtn.style.padding = '4px 8px';
        delBtn.onclick = () => {
            employeeNames.splice(index, 1);
            localStorage.setItem('employeeNames', JSON.stringify(employeeNames));
            renderEmployeeList();
        };

        div.appendChild(input);
        div.appendChild(delBtn);
        employeeListDiv.appendChild(div);
    });
}

document.getElementById('addEmployee').onclick = () => {
    if(employeeNames.length >= MAX_EMPLOYEES){
        alert(`Maximal ${MAX_EMPLOYEES} Mitarbeiter erlaubt.`);
        return;
    }
    employeeNames.push(`Mitarbeiter ${employeeNames.length + 1}`);
    localStorage.setItem('employeeNames', JSON.stringify(employeeNames));
    renderEmployeeList();
}

renderEmployeeList();
</script>

{% endblock %}

