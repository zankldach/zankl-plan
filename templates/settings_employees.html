
{% extends "base.html" %}
{% block title %}Einstellungen · Mitarbeiter{% endblock %}

{% block content %}
<h1>Einstellungen · Mitarbeiter</h1>

<!-- Standortwahl (GET) -->
<formings/employees
  <label>Standort:
    {% set s = standort|default('engelbrechts') %}
    <select name="standort" onchange="document.getElementById('standortForm').submit()">
      <option value="engelbrechts" {{ 'selected' if s == 'engelbrechts' else '' }}>Engelbrechts</option>
      <option value="gross-gerungs" {{ 'selected' if s == 'gross-gerungs' else '' }}>Groß Gerungs</option>
    </select>
  </label>
</form>

{% if saved %}
  <div style="padding:8px; background:#e8ffe8; border:1px solid #9bd49b; margin-bottom:10px;">Gespeichert.</div>
{% endif %}

<!-- HAUPTFORMULAR (POST) -->
/settings/employees
  <!-- Standort versteckt mitsenden -->
  <input type="hidden" name="standort" value="{{ standort }}" />

  <!-- Hidden-Felder für optionales Löschen/Update (werden aktuell nicht benötigt, können bleiben) -->
  <input type="hidden" name="ids" id="idsField" />
  <input type="hidden" name="names" id="namesField" />
  <input type="hidden" name="new_names" id="newNamesField" />
  <input type="hidden" name="delete_ids" id="deleteIdsField" />

  <!-- Bestehende Mitarbeiter -->
  <table class="table" style="margin-bottom:10px; width:100%; border-collapse:collapse;">
    <thead>
      <tr>
        <th style="width:80px; text-align:left;">ID</th>
        <th style="text-align:left;">Name</th>
        <th style="width:120px; text-align:left;">Aktionen</th>
      </tr>
    </thead>
    <tbody id="empTableBody">
      {% for e in employees|default([]) %}
        <tr data-id="{{ e.id }}">
          <td>{{ e.id }}</td>
          <td>
            <input type="text"
                   name="emp_name_existing_{{ e.id }}"
                   value="{{ e.name }}"
                   class="emp-name"
                   style="width:100%;">
          </td>
          <td>
            <!-- optional: später Löschen aktivieren -->
            <!-- <button type="button" class="btn-del" data-id="{{ e.id }}">Löschen</button> -->
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Neue Mitarbeiter – 8 Felder OHNE JS -->
  <fieldset style="border:1px solid #e5e7eb; padding:10px; border-radius:6px;">
    <legend style="padding:0 6px; color:#334155; font-weight:600;">Neue Mitarbeiter</legend>

    <p style="margin:0 0 8px 0; color:#64748b;">
      Trage die Namen in die Felder ein. Leere Felder werden ignoriert.
    </p>

    <div style="display:grid; grid-template-columns: 180px 1fr; gap:8px; align-items:center;">
      {% for i in range(8) %}
        <label for="emp_new_{{ i }}" style="color:#334155;">Neuer Mitarbeiter {{ i+1 }}:</label>
        <input type="text"
               id="emp_new_{{ i }}"
               name="emp_name_new[]"
               placeholder="Name eingeben"
               style="width:100%; padding:6px 8px; border:1px solid #d9dee5; border-radius:6px;">
      {% endfor %}
    </div>
  </fieldset>

  <div style="margin-top:12px;">
    <button type="submit" id="saveBtn">Speichern</button>
  </div>
</form>
{% endblock %}

{% block scripts %}
<!-- Kein JavaScript notwendig -->
{% endblock %}
``
