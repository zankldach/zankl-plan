{% extends "base.html" %}
{% block title %}Mitarbeiterverwaltung{% endblock %}
{% block content %}

<h1>Mitarbeiterverwaltung</h1>

<div id="settings">
    <h3>Mitarbeiterliste</h3>
    <div id="employeeList"></div>
    <button id="addEmployee">+ Mitarbeiter</button>
</div>

<script>
const MAX_EMPLOYEES = 15;
let employeeNames = JSON.parse(localStorage.getItem('employeeNames')) || [
    "Mitarbeiter 1","Mitarbeiter 2","Mitarbeiter 3","Mitarbeiter 4","Mitarbeiter 5"
];

const employeeListDiv = document.getElementById('employeeList');

function renderEmployeeList() {
    employeeListDiv.innerHTML = '';
    employeeNames.forEach((name,index)=>{
        const div = document.createElement('div');
        const input = document.createElement('input');
        input.value = name;
        input.oninput = () => {
            employeeNames[index] = input.value;
            localStorage.setItem('employeeNames', JSON.stringify(employeeNames));
        };
        const delBtn = document.createElement('button');
        delBtn.innerText = 'â€“';
        delBtn.onclick = () => {
            employeeNames.splice(index,1);
            localStorage.setItem('employeeNames', JSON.stringify(employeeNames));
            renderEmployeeList();
        };
        div.appendChild(input);
        div.appendChild(delBtn);
        employeeListDiv.appendChild(div);
    });
}

document.getElementById('addEmployee').onclick = () => {
    if(employeeNames.length >= MAX_EMPLOYEES) return;
    employeeNames.push(`Mitarbeiter ${employeeNames.length+1}`);
    localStorage.setItem('employeeNames', JSON.stringify(employeeNames));
    renderEmployeeList();
}

renderEmployeeList();
</script>

{% endblock %}
