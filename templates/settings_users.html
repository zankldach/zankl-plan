{% extends "base.html" %}
{% block title %}Benutzer Â· Einstellungen{% endblock %}

{% block content %}
<h1>Benutzer verwalten</h1>

<p style="margin-bottom:12px;">
  <b>Hinweis:</b> Viewer sehen je nach Hakerl EB/GG die jeweilige View. Write darf alles (wie Admin).
</p>

<table class="table" border="1" cellspacing="0" cellpadding="6" style="width:100%; margin-bottom:16px;">
  <thead>
    <tr>
      <th style="width:220px;">Name (Login)</th>
      <th style="width:80px;">Write</th>
      <th style="width:80px;">EB</th>
      <th style="width:80px;">GG</th>
      <th style="width:90px;"></th>
    </tr>
  </thead>
  <tbody>
    {% for u in users %}
    <tr>
      <td>{{ u.username }}</td>
      <td style="text-align:center;">{{ "âœ…" if u.is_write else "â€”" }}</td>
      <td style="text-align:center;">{{ "âœ…" if u.can_view_eb else "â€”" }}</td>
      <td style="text-align:center;">{{ "âœ…" if u.can_view_gg else "â€”" }}</td>
      <td style="text-align:center;">
        <form method="post" action="/settings/users/delete" onsubmit="return confirm('Benutzer wirklich lÃ¶schen?');" style="display:inline;">
          <input type="hidden" name="user_id" value="{{ u.id }}">
          <button type="submit">ğŸ—‘ï¸</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h2>Neuen Benutzer anlegen</h2>

<form method="post" action="/settings/users/create" style="border:1px solid #ddd; padding:12px; border-radius:8px; max-width:520px;">
  <label style="display:block; margin-bottom:6px;">
    Name (Login):
    <input type="text" name="username" required style="width:100%; padding:6px;">
  </label>

  <label style="display:block; margin-bottom:6px;">
    Passwort:
    <input type="password" name="password" required style="width:100%; padding:6px;">
  </label>

  <div style="font-size:12px; color:#334155; margin:6px 0 12px;">
    Passwort-Regel: mind. 8 Zeichen, mindestens 1 Buchstabe, 1 Zahl, 1 Sonderzeichen.
  </div>

  <label style="display:block; margin-bottom:8px;">
    <input type="checkbox" name="is_write" value="1">
    Write (darf alles, beide Standorte, inkl. Benutzer anlegen)
  </label>

  <div style="display:flex; gap:12px; margin-bottom:12px;">
    <label><input type="checkbox" name="can_view_eb" value="1"> View EB</label>
    <label><input type="checkbox" name="can_view_gg" value="1"> View GG</label>
  </div>

  <button type="submit">Benutzer anlegen</button>
</form>

{% endblock %}
