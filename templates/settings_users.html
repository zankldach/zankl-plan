{% extends "base.html" %}
{% block content %}
<h1>Benutzer-Zuordnung (Viewer → Standort)</h1>
<table class="table">
  <thead><tr><th>Name</th><th>E-Mail</th><th>Rolle</th><th>Zugewiesener Standort (nur Viewer)</th></tr></thead>
  <tbody>
    {% for u in users %}
      <tr>
        <td>{{ u.name }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.role }}</td>
        <td>
          {% if u.role == 'view' %}
            <form method="post" action="/settings/users/set-viewer-standort" class="form-inline">
              <input type="hidden" name="user_id" value="{{ u.id }}">
              <select name="standort_id">
                {% for s in standorte %}
                  <option value="{{ s.id }}" {% if u.viewer_standort_id == s.id %}selected{% endif %}>{{ s.name }}</option>
                {% endfor %}
              </select>
              <button type="submit">Speichern</button>
            </form>
          {% else %}
            –
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
