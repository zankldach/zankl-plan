{% extends "base.html" %}

{% block title %}Zankl Plan – Wochenplanung{% endblock %}

{% block content %}
<main class="container">

    <h2>Wochenansicht – KW {{ kw }} / {{ year }}</h2>

    <!-- Standorte -->
    <div class="standorte">
        {% for s in standorte %}
            <a href="{{ url_for('week_view') }}?standort_id={{ s.id }}&kw={{ kw }}&year={{ year }}">
                {{ s.name }}
            </a>
        {% endfor %}
    </div>

    <!-- Steuerung -->
    <form action="{{ url_for('week_view') }}" method="get">
        <input type="hidden" name="standort_id" value="{{ standort_id }}">

        <label>
            KW:
            <input type="number" name="kw" value="{{ kw }}" min="1" max="53">
        </label>

        <label>
            Jahr:
            <input type="number" name="year" value="{{ year }}">
        </label>

        <button type="submit">Anzeigen</button>
    </form>

    <hr>

    <!-- GRID -->
    <table border="1" cellpadding="6">
        <thead>
            <tr>
                <th>Zeile</th>
                {% for day in days %}
                    <th>
                        {{ day.label }}<br>
                        <small>{{ day.date }}</small>
                    </th>
                {% endfor %}
            </tr>
        </thead>

        <tbody>
            {% for r in range(employee_lines) %}
                <tr>
                    <td>{{ r + 1 }}</td>

                    {% for d in range(workdays) %}
                        <td>
                            {% set cell = grid[r][d] %}
                            {% if cell and cell.job_id %}
                                <strong>{{ cell.title }}</strong>
                            {% else %}
                                frei
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>

</main>
{% endblock %}
